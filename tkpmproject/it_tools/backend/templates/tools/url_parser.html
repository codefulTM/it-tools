<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <main>
        <h2 style="border-bottom: 1px solid #444;">URL parser</h2>
        <p style="color: #ccc;">Parse a URL into its parts (protocol, origin, params, port, path, username, password...)
        </p>

        <label style="display: block; margin: 1rem 0 0.5rem;">Your url to parse:</label>
        <input id="urlInput" type="text"
            value="https://me:pwd@it-tools.tech:3000/url-parser?key1=value&key2=value2#the-hash"
            style="width: 100%; padding: 0.5rem; background: #222; color: white; border: 1px solid #333;"
            oninput="parseUrl()" />

        <div id="output" style="margin-top: 2rem;"></div>

        <script>
            function parseUrl() {
                const input = document.getElementById('urlInput').value;
                const output = document.getElementById('output');

                try {
                    const url = new URL(input);
                    const params = [...url.searchParams.entries()];
                    const makeRow = (label, value) => `
          <div style="margin-bottom: 0.5rem;">
            <strong style="display: inline-block; width: 100px;">${label}:</strong>
            <input value="${value}" readonly style="width: 70%; padding: 4px; background: #222; color: white; border: 1px solid #333;" />
          </div>
        `;

                    let result = '';
                    result += makeRow('Protocol', url.protocol.replace(':', ''));
                    result += makeRow('Username', url.username);
                    result += makeRow('Password', url.password);
                    result += makeRow('Hostname', url.hostname);
                    result += makeRow('Port', url.port);
                    result += makeRow('Path', url.pathname);
                    result += makeRow('Params', url.search);
                    if (params.length > 0) {
                        result += `<div style="margin: 1rem 0 0.5rem;"><strong>↳ Query Params:</strong></div>`;
                        params.forEach(([key, value]) => {
                            result += makeRow('↳ ' + key, value);
                        });
                    }
                    result += makeRow('Hash', url.hash.replace('#', ''));

                    output.innerHTML = result;
                } catch (e) {
                    output.innerHTML = `<span style="color: red;">Invalid URL</span>`;
                }
            }

            window.onload = parseUrl;
        </script>
    </main>
</body>

</html>